{% extends 'layouts/planificacion_layout.html' %} {% block seccion %}

<style>
    .modal {
    overflow: auto; /* Enable scroll if needed */
    background-color: rgba(179,206,226,0.6); /* Black w/ opacity */
    }
</style>

<a
    href="{% url 'planificaciones:webgrafia' planificacion.id %}"
    class="link-arrow my-2 mb-5"
    >{% include "iconos/chevron-left.html" %}<span>Volver</span></a
>

<h4>Modificar webgrafia</h4>

<form id="webgrafia-form" action="" method="POST">
  {% csrf_token %} {{form.as_p}}
</form>

<div id="buttons-footer" style="display: flex; justify-content: space-between">
    <button
        type="button"
        class="btn btn-danger my-4"
        data-toggle="modal"
        data-target="#modal-delete"
    >
        Eliminar
    </button>

    <div id="right-buttons">
        <a
            href="{% url 'planificaciones:webgrafia' planificacion.id %}"
            style="text-decoration: none"
        >
            <button class="btn btn-outline-primary my-4">Cancelar</button>
        </a>
        <button
            class="btn btn-primary my-4"
            onclick="document.getElementById('webgrafia-form').submit()"
        >
            Guardar
        </button>
    </div>
</div>



<!-- Modal eliminar webgrafia -->
<div
    class="modal fade"
    id="modal-delete"
    tabindex="-1"
    role="dialog"
    aria-labelledby="exampleModalLabel"
    aria-hidden="true"
>
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">
                    Eliminar webgrafia
                </h5>
                <button
                    type="button"
                    class="btn-close"
                    data-dismiss="modal"
                    aria-label="Close"
                ></button>
            </div>
            <div class="modal-body">

              <form method="POST" action="{% url 'planificaciones:deleteWebgrafia' planificacion.id webgrafia.id %}">
                  {% csrf_token %}
                  
                  <p>Estás por eliminar la siguiente webgrafía: <br />
                      {{webgrafia.autor}}, {{webgrafia.titulo_publicacion}}
                  </p>
                  <p><b>Desea eliminar la webgrafía correspondiente?</b> </p>

                  {% if form.errors %}
                  <div class="alert alert-danger">{{form.errors}}</div>
                  {% endif %}

                  <div class="modal-footer">
                      <button
                          type="button"
                          class="btn btn-outline-primary"
                          data-dismiss="modal"
                      >
                          Cancelar
                      </button>
                      <button
                          id="delete-button"
                          type="submit"
                          class="btn btn-danger my-4"
                      >
                          Eliminar
                      </button>
                  </div>
              </form>
            </div>
        </div>
    </div>
</div>

<script>
const modal = document.getElementById("modal-delete");
const deleteButton = document.getElementById("delete-button");
const closeSpan = document.getElementsByClassName("close")[0];
const closeButton = document.getElementById("cerrar-modal");


// When the user clicks on the button, open the modal 
deleteButton.onclick = function() {
  modal.style.display = "block";
}

// When the user clicks on <span> (x), close the modal
closeSpan.onclick = function() {
  modal.style.display = "none";
}

closeButton.onclick = function() {
  modal.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
}

</script>

{% endblock %}
