{% extends 'layouts/planificacion_layout.html' %} {% block seccion %}

<style>
  table {
    border-collapse: collapse;
    width: 100%;
  }

  td,
  th {
    border: 1px solid #dddddd;
    text-align: center;
    padding: 4px;
    font-weight: 400;
    font-size: small;
  }
</style>

<h2 class="seccion__encabezado">2. Estructura de la cátedra</h2>
<div class="seccion__card">
    {% if mensaje_exito %}
    <div class="alert alert-success">{{mensaje_exito}}</div>
    {% endif %}


    <table class="seccion__table">
        <tbody>
            <table>
                <tr>
                    <th>Nombre</th>
                    <th>Categoría</th>
                    <th>Dedicación</th>
                    <th>Situación</th>
                    <th>Tareas/Función a desarrollar</th>
                </tr>

                {% if data %} {% for detalleprofesor in data %}
                <tr
                    onclick="location.href='detalles-profesor-catedra/edit/{{detalleprofesor.id}}'"
                >
                    <td class="py-4">
                        <a
                            href="detalles-profesor-catedra/edit/{{detalleprofesor.id}}"
                            >{{detalleprofesor.profesor.nombre|default:""}}
                            {{detalleprofesor.profesor.apellido|default:""}}</a
                        >
                    </td>
                    <td class="py-4">{{detalleprofesor.categoria|default:""}}</td>
                    <td class="py-4">{{detalleprofesor.dedicacion|default:""}}</td>
                    <td class="py-4">{{detalleprofesor.situacion|default:""}}</td>
                    <td>
                        <ul style="text-align: left;">
                            {% for tarea in detalleprofesor.tareas.all %}
                                <li>{{ tarea.tarea_funcion }}</li>
                            {% endfor %}
                        </ul>
                    </td>
                </tr>
                {% endfor %}{% else %}
                <tr>
                    <td colspan="5">No hay datos para mostrar</td>
                </tr>
                {% endif %}
            </table>
        </tbody>
    </table>

    <h3 class="mt-4">Agregar docente</h3>

    <form
        method="POST"
        action="{% url 'planificaciones:detallesprofesorcatedra' planificacion.id %}"
    >
        {% csrf_token %} 

        <label>Profesor/a:</label>
        <p>{{form.profesor}}</p>
        
        <label>Situación y/o condición:</label>
        <p>{{form.situacion}}</p>

        <label>Categoría:</label>
        <p>{{form.categoria}}</p>

        <label>Designación:</label>
        <p>{{form.dedicacion}}</p>

        <label>Funciones a desarrollar:</label>
        <p>{{form.tareas}}</p>

        <label>Actividades:</label>
        <p>{{form.actividades}}</p>


        <button type="submit" class="btn btn-primary">Guardar</button>
    </form>
    {% if form.errors %}
    <div class="alert alert-danger">{{form.errors}}</div>
    {% endif %}
</div>
{% endblock %}
